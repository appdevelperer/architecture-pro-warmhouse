@startuml
!include <C4/C4_Context>

title C4-диаграмма контекста: Экосистема "Тёплый дом" (с доменами)

Person(пользователь, "Пользователь", "Владелец умного дома")
Person(клиентская_поддержка, "Клиентская поддержка", "Команда обслуживания клиентов")
Person(партнер, "Партнёр", "Производитель устройств")
Person(менеджер_продаж, "Менеджер по продажам", "Команда продаж и маркетинга")

System(теплый_дом, "Экосистема 'Тёплый дом'", "SaaS-платформа для управления умным домом\nДомены: Устройства, Сценарии, Пользователи, Комплекты, Телеметрия, Партнёрская интеграция")

System_Ext(партнерские_устройства, "Партнёрские устройства", "Умные устройства различных производителей\n(датчики, реле, камеры, ворота)")

Rel(пользователь, теплый_дом, "Управляет устройствами, настраивает сценарии\nПокупает комплекты, просматривает телеметрию", "HTTPS/WebSocket")
Rel(теплый_дом, партнерские_устройства, "Отправляет команды, получает телеметрию\nПоддерживает различные протоколы", "MQTT/HTTP/Zigbee")
Rel(клиентская_поддержка, теплый_дом, "Оказывает поддержку, управляет аккаунтами", "Внутренний интерфейс")
Rel(партнер, теплый_дом, "Интегрирует устройства, предоставляет адаптеры", "API")
Rel(менеджер_продаж, теплый_дом, "Управляет комплектами, отслеживает продажи", "Внутренний интерфейс")

@enduml