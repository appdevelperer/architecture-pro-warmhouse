@startuml AsIs
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title Диаграмма контекста (C4): Текущая система "Тёплый дом" (As-Is)

Person(user, "Конечный пользователь", "Владелец дома, управляет отоплением через веб-интерфейс")
Person(technician, "Технический специалист", "Выезжает для установки и подключения датчиков к системе")

System(monolith, "Монолитное приложение (Go)", "Управление отоплением, опрос температуры. Синхронная архитектура.")

System_Ext(sensors, "Устройства отопления", "Датчики и реле в домах. Подключены через специалиста. Опрашиваются сервером.")
System_Ext(database, "PostgreSQL", "Хранение данных о пользователях, устройствах и температуре.")

Rel(user, monolith, "Управляет отоплением, просматривает температуру", "HTTPS")
Rel(monolith, sensors, "Отправляет команды, опрашивает состояние", "HTTP / Proprietary Protocol")
Rel(monolith, database, "Читает/пишет данные", "PostgreSQL Protocol")

' Техник не взаимодействует с системой через API — он физически подключает устройства.
' Поэтому показываем как отдельного актора без прямой связи с монолитом.
' Его роль — обеспечить подключение устройств к системе.

note right of technician
  Не взаимодействует с системой через ПО.
  Физически подключает устройства,
  после чего они становятся доступны системе.
end note

LAYOUT_WITH_LEGEND()

@enduml