@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title Диаграмма кода: CommandSender (паттерн Strategy)

' Показываем, что это часть Device Service
Container_Boundary(device_service, "Device Service") {
    Component(command_sender, "CommandSender", "Go struct", "Отправляет команды устройствам через выбранный протокол")

    package "commandsender" {
        [CommandSender] as cmd_sender
        [CommandStrategy] as cmd_strategy <<interface>>
        [HTTPCommandStrategy] as http_strategy
        [MQTTCommandStrategy] as mqtt_strategy
        [ZigbeeCommandStrategy] as zigbee_strategy
    }

    cmd_sender --> cmd_strategy : использует
    cmd_strategy <|.. http_strategy
    cmd_strategy <|.. mqtt_strategy
    cmd_strategy <|.. zigbee_strategy

    note right of cmd_sender
        Содержит:
        - deviceID: string
        - strategy: CommandStrategy
        
        Метод:
        + SendCommand(command string) error
    end note

    note right of cmd_strategy
        Интерфейс:
        + Send(deviceID, command) error
    end note

    note right of http_strategy
        Реализует HTTP-отправку
        через REST API шлюза
    end note

    note right of mqtt_strategy
        Будущая реализация
        через MQTT брокер
    end note

    note right of zigbee_strategy
        Будущая реализация
        через Zigbee-шлюз
    end note
}

' Внешняя зависимость
Rel_Back(device_service, integration_gateway, "Отправка команд", "gRPC/HTTP/MQTT")

@enduml